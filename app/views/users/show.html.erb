
<% provide(:title, @user.name) %>

<div class="row">
 <aside class="span4">
    <section>
      <h1>
        <%= gravatar_for @user %>
        <%= @user.username %>
      </h1>
      <h5>
        AKA: <%= @user.name %>
      </H5>
    </section>
    <section>
      <%= render 'shared/stats' %>
    </section>
    <section>
      <h4>About Me</h4>
      <p>I'm a guitar player</p>
    </section>
  </aside>
  <div class="span8">
    <%= render 'follow_form' if signed_in? %>
      <% if current_user.username == @user.username %>
        <h3>Your Stuff</h3>
      <%else%>
       <h3><%=@user.username %>'s Stuff</h3> 
      <% end %>
      <section>
        <h4>Start a new song</h4>
        <%= render 'shared/track_upload_form' %>
      </section>
      <section id= 'tracks'>
     <h4>Listen to one of your tracks</h4>
     <ul class='playlist js-track-list'>
    <% tracks = Track.where(user_id: current_user.id) %>
      <% tracks.each do |track|%>
        <% key = track.track_url %>
        <% track_url = @bucket.objects[key].url_for(:read) %>
        <li data-additional-info= <%=track_url%>><%= sanitize_filename(key) %></li>
      <% end %>
</ul>
      <%= render 'shared/player' %>
    </section>
    <% if @user.microposts.any? %>
      <section id = 'user_shouts'>  
        <h4>Shouts (<%= @user.microposts.count %>)</h4>
        <ol class="microposts">
          <%= render @microposts %>
        </ol>
        <%= will_paginate @microposts %>
      </section>
    <% end %>

  </div>
</div>
